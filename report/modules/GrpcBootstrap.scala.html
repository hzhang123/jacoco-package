<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="zh"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>GrpcBootstrap.scala</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">JaCoCo Coverage Report</a> &gt; <a href="index.source.html" class="el_package">modules</a> &gt; <span class="el_source">GrpcBootstrap.scala</span></div><h1>GrpcBootstrap.scala</h1><pre class="source lang-java linenums">package modules

import javax.inject.Inject
import akka.actor.ActorSystem
import akka.http.scaladsl.UseHttp2.{ Always, Never }
import akka.http.scaladsl.model.{ HttpRequest, HttpResponse }
import akka.http.scaladsl.{ Http2, HttpConnectionContext }
import akka.stream.{ ActorMaterializer, Materializer }
import example.myapp.helloworld.grpc._
import service.grpc.GreeterServiceImpl

import scala.concurrent.{ ExecutionContext, Future }

/**
 * GrpcBootstrap
 *
 * @author damon lin
 *         2019/3/10
 */
<span class="fc" id="L20">class GrpcBootstrap @Inject() () {</span>
  //class GrpcBootstrap @Inject()(system: ActorSystem) {
  //
  //  implicit val sys: ActorSystem = system
  //  implicit val mat: Materializer = ActorMaterializer()
  //  implicit val ec: ExecutionContext = sys.dispatcher
  //
  //  val services: Seq[HttpRequest =&gt; Future[HttpResponse]] = Seq(
  //    GreeterServiceHandler(new GreeterServiceImpl())
  //  )
  //
  //  println(&quot;init akka grpc successful!&quot;)
  //
  //  // Bind service handler servers to localhost:8080
  //  val bindings = Future.sequence {
  //    services
  //      .zip(Seq(8080))
  //      .map {
  //        case (service, port) =&gt;
  //          Http2().bindAndHandleAsync(
  //            service,
  //            interface = &quot;127.0.0.1&quot;,
  //            port = port,
  //            connectionContext = HttpConnectionContext(http2 = Always))
  //      }
  //  }
  //
  //  // report successful binding
  //  bindings.foreach { bs =&gt;
  //    bs.foreach { binding =&gt;
  //      println(s&quot;gRPC server bound to: ${binding.localAddress}&quot;)
  //    }
  //  }

<span class="fc" id="L54">}</span>
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.5.201910111838</span></div></body></html>